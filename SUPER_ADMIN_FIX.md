# ğŸ”§ ×ª×™×§×•×Ÿ ×‘×¢×™×™×ª ×”×¨×©××•×ª Super Admin

## ğŸ¯ ×”×‘×¢×™×” ×©×–×•×”×ª×”
××©×ª××© ×©××•×’×“×¨ ×›"×× ×”×œ ××¢×¨×›×ª" ×œ× ×”×¦×œ×™×— ×œ×’×©×ª ×œ×›×œ ×”×¤×•× ×§×¦×™×•×ª ×‘××¢×¨×›×ª, ×œ××¨×•×ª ×©×”×™×” ×œ×• ×¨×•×œ `super_admin`.

## ğŸ” ×”×’×•×¨× ×œ×‘×¢×™×”
×”××¢×¨×›×ª ×”×™×™×ª×” ××‘×•×¡×¡×ª ×¢×œ ×”×¨×©××•×ª ×¡×¤×¦×™×¤×™×•×ª ×œ××¡×›×™× ×’× ×¢×‘×•×¨ ××©×ª××©×™ `super_admin`, ×‘××§×•× ×œ×ª×ª ×œ×”× ×’×™×©×” ××•×˜×•××˜×™×ª ×œ×›×œ ×”××¡×›×™×.

## âš¡ ×”×¤×ª×¨×•×Ÿ ×©×™×•×©×

### 1. ×©×™× ×•×™ ×œ×•×’×™×§×ª ×”×¨×©××•×ª ×‘×©×¨×ª (`server/index.js`)

#### ×. ×¢×“×›×•×Ÿ middleware ×©×œ ×”×¨×©××•×ª
```javascript
// ×‘×“×™×§×” ×× ×”××©×ª××© ×”×•× super_admin ×œ×¤× ×™ ×‘×“×™×§×ª ×”×¨×©××•×ª ×¡×¤×¦×™×¤×™×•×ª
const userRole = await new Promise((resolve, reject) => {
  db.get('SELECT role FROM users WHERE id = ?', [req.session.userId], (err, row) => {
    if (err) reject(err);
    else resolve(row);
  });
});

if (userRole && userRole.role === 'super_admin') {
  logSuccess(`ğŸ”“ ××©×ª××© super_admin - ×’×™×©×” ××œ××” ×œ×›×œ ×”××¡×›×™×`);
  return next();
}
```

#### ×‘. ×”×•×¡×¤×ª middleware ×—×“×© ×œ××©×ª××©×™ Super Admin
```javascript
const requireSuperAdmin = (req, res, next) => {
  db.get('SELECT role FROM users WHERE id = ?', [req.session.userId], (err, user) => {
    if (err) {
      return res.status(500).json({ error: '×©×’×™××” ×‘×‘×“×™×§×ª ×”×¨×©××•×ª' });
    }
    
    if (user && user.role === 'super_admin') {
      logSuccess(`ğŸ”“ Super Admin ${req.session.userId} - ×’×™×©×” ××œ××”`);
      return next();
    }
    
    return res.status(403).json({ error: '××™×Ÿ ×œ×š ×”×¨×©××” - × ×“×¨×©×ª ×¨××ª Super Admin' });
  });
};
```

### 2. ×”×•×¡×¤×ª API ×œ×”×¢× ×§×ª ×”×¨×©××•×ª ××œ××•×ª

#### route ×—×“×©: `/api/admin/grant-super-admin-access`
- **×¤×•× ×§×¦×™×”**: ××¢× ×™×§ ×œ××©×ª××© Super Admin ×”×¨×©××•×ª ××œ××•×ª ×œ×›×œ ×”××¡×›×™× ×‘××¢×¨×›×ª
- **××‘×˜×—×”**: × ×’×™×© ×¨×§ ×œ××©×ª××©×™× ×¢× ×¨×•×œ `super_admin`
- **×¤×¢×•×œ×”**: ×‘×•×“×§ ××ª ×›×œ ×”××¡×›×™× ×‘××¢×¨×›×ª ×•××•×¡×™×£/××¢×“×›×Ÿ ×”×¨×©××•×ª `admin` ×¢×‘×•×¨×

### 3. ×”×•×¡×¤×ª ×›×¤×ª×•×¨ ×‘×¤×× ×œ ×”× ×™×”×•×œ (`admin-panel/src/App.js`)

#### ×ª×¤×¨×™×˜ ×”××©×ª××© ××•×¨×—×‘
```javascript
// Super Admin button - only for super_admin role
...(user.role === 'super_admin' ? [{
  key: 'grant_permissions',
  icon: <LockOutlined />,
  label: '×”×¢× ×§ ×”×¨×©××•×ª ××œ××•×ª',
  onClick: handleGrantSuperAdminAccess
}] : [])
```

#### ×¤×•× ×§×¦×™×™×ª ×”×¢× ×§×ª ×”×¨×©××•×ª
```javascript
const handleGrantSuperAdminAccess = async () => {
  try {
    const response = await api.post('/api/admin/grant-super-admin-access');
    notification.success({
      message: '×”×¨×©××•×ª ×¢×•×“×›× ×•',
      description: response.data.message
    });
    // ×¨×¢× ×•×Ÿ ×¨×©×™××ª ×”××¡×›×™×
    const screensResponse = await api.get('/api/user/screens');
    setScreens(screensResponse.data);
  } catch (error) {
    notification.error({
      message: '×©×’×™××” ×‘××ª×Ÿ ×”×¨×©××•×ª',
      description: error.response?.data?.error || error.message
    });
  }
};
```

## ğŸ§ª ×‘×“×™×§×•×ª ×©× ×¢×¨×›×•

### ×‘×“×™×§×ª ××¡×“ ×”× ×ª×•× ×™×
```
ğŸ‘¥ ××©×ª××©×™×:
  - admin (super_admin) 
  - saia (admin)

ğŸ”’ ×”×¨×©××•×ª × ×•×›×—×™×•×ª:
  - admin â†’ ××¢×œ×™×ª ×‘× ×™×™×Ÿ ×××“×•×§×¡ (admin)
  - admin â†’ ××¢×œ×™×ª ×”×—×œ×™×œ ×¤×ª×— ×ª×§×•×•×” (admin)  
  - admin â†’ ××¢×œ×™×ª ×§× ×™×•×Ÿ ×’×‘×¢×ª ×©××•××œ (admin)
  - saia â†’ ××¢×œ×™×ª ×‘× ×™×™×Ÿ ×××“×•×§×¡ (read)
```

### ×‘×“×™×§×ª API
```
âœ… ×”×ª×—×‘×¨×•×ª ××•×¦×œ×—×ª ×›×× ×”×œ ×¢×œ
âœ… API ×”×¢× ×§×ª ×”×¨×©××•×ª ×¢×•×‘×“: ×”×•×¢× ×§×• ×”×¨×©××•×ª ××œ××•×ª ×œ-3 ××¡×›×™×
âœ… ×’×™×©×” ×œ××¡×›×™×: 3 ××¡×›×™× × ×’×™×©×™×
```

## ğŸ¯ ×ª×•×¦××•×ª ×”×ª×™×§×•×Ÿ

1. **×’×™×©×” ××•×˜×•××˜×™×ª**: ××©×ª××©×™ `super_admin` ××§×‘×œ×™× ×’×™×©×” ××•×˜×•××˜×™×ª ×œ×›×œ ×”××¡×›×™× ×œ×œ× ×¦×•×¨×š ×‘×”×¨×©××•×ª ×¡×¤×¦×™×¤×™×•×ª
2. **×›×¤×ª×•×¨ ×”×¢× ×§×ª ×”×¨×©××•×ª**: ××¤×©×¨×•×ª × ×•×—×” ×œ×”×¢× ×™×§ ×”×¨×©××•×ª ××œ××•×ª ×“×¨×š ×”×××©×§
3. **××‘×˜×—×” ××©×•×¤×¨×ª**: ×¨×§ ××©×ª××©×™ `super_admin` ×™×›×•×œ×™× ×œ×”×©×ª××© ×‘×¤×•× ×§×¦×™×” ×–×•
4. **×™×¦×™×‘×•×ª**: ×”×©×™× ×•×™×™× ×œ× ××©×¤×™×¢×™× ×¢×œ ××©×ª××©×™× ×¨×’×™×œ×™× ×•×¢×œ ××¢×¨×›×ª ×”×”×¨×©××•×ª ×”×§×™×™××ª

## ğŸš€ ×”×©×™××•×©

### ×¢×‘×•×¨ ×× ×”×œ ××¢×¨×›×ª (Super Admin):
1. ×”×ª×—×‘×¨ ×œ×¤×× ×œ ×”× ×™×”×•×œ ×¢× ××©×ª××© `admin`
2. ×œ×—×¥ ×¢×œ ×©× ×”××©×ª××© ×‘×¤×™× ×” ×”×©×××œ×™×ª ×¢×œ×™×•× ×”
3. ×‘×—×¨ "×”×¢× ×§ ×”×¨×©××•×ª ××œ××•×ª"
4. ×”××¢×¨×›×ª ×ª×¢× ×™×§ ××•×˜×•××˜×™×ª ×”×¨×©××•×ª ××œ××•×ª ×œ×›×œ ×”××¡×›×™×

### ×¢×‘×•×¨ ××¤×ª×—×™×:
- ×”×§×•×“ ×ª×•××š ×‘-`super_admin` ×•-`admin` ×‘×¨××ª ×”×©×¨×ª
- × ×™×ª×Ÿ ×œ×”×•×¡×™×£ ××©×ª××©×™× ×—×“×©×™× ×¢× ×¨×•×œ `super_admin` ×“×¨×š ××¡×“ ×”× ×ª×•× ×™× ××• API

---
*×ª×™×§×•×Ÿ ×‘×•×¦×¢ ×‘×ª××¨×™×š: 16 ×‘×™× ×•××¨ 2025*
