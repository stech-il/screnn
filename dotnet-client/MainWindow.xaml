<Window x:Class="DigitlexViewer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Digitlex Viewer" WindowStyle="None" WindowState="Maximized" Background="#000"
        KeyDown="Window_KeyDown">
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
      <RowDefinition Height="56"/>
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="*"/>
      <ColumnDefinition Width="560"/>
    </Grid.ColumnDefinitions>

    <!-- Header / Status -->
    <Grid Grid.ColumnSpan="2" Background="#001529" Height="72">
      <Grid.ColumnDefinitions>
        <ColumnDefinition Width="*"/>
        <ColumnDefinition Width="Auto"/>
        <ColumnDefinition Width="*"/>
      </Grid.ColumnDefinitions>
      <!-- Left: clock + conn status + weather -->
      <StackPanel Grid.Column="0" Orientation="Horizontal" Margin="12,0" VerticalAlignment="Center">
        <TextBlock x:Name="ClockText" Foreground="White" Margin="0,0,12,0" VerticalAlignment="Center" FontSize="26"/>
        <Ellipse x:Name="ConnDot" Width="12" Height="12" Fill="#ff3b30" Stroke="White" StrokeThickness="1" Margin="0,0,6,0" VerticalAlignment="Center"/>
        <TextBlock x:Name="ConnText" Foreground="White" VerticalAlignment="Center" FontSize="14" Text="מנותק"/>
        <Border Background="#0b223c" CornerRadius="6" BorderBrush="#1f3763" BorderThickness="1" Margin="12,0,0,0" Padding="8,4">
          <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
            <TextBlock x:Name="WeatherEmoji" FontSize="18" Margin="0,0,6,0"/>
            <TextBlock x:Name="WeatherText" Foreground="#cfe6ff" FontSize="14"/>
          </StackPanel>
        </Border>
      </StackPanel>
      <!-- Center: title (שם המסך) -->
      <TextBlock x:Name="TitleText" Grid.Column="1" Foreground="White" FontSize="30" FontWeight="Bold" VerticalAlignment="Center" HorizontalAlignment="Center" TextAlignment="Center"/>
      <!-- Right: logo -->
      <StackPanel Grid.Column="2" Orientation="Horizontal" Margin="12,0" VerticalAlignment="Center" FlowDirection="RightToLeft">
        <Image x:Name="LogoImage" Width="84" Height="84" Margin="0,0,12,0" VerticalAlignment="Center"/>
      </StackPanel>
    </Grid>

    <!-- Content area -->
    <Grid Grid.Row="1" Grid.Column="0" Background="#000" Margin="8,8,4,8">
      <Image x:Name="ImageView" Stretch="Uniform" Visibility="Collapsed"/>
      <MediaElement x:Name="VideoView" LoadedBehavior="Manual" UnloadedBehavior="Stop" Visibility="Collapsed" IsMuted="True"/>
      <WebBrowser x:Name="HtmlView" Visibility="Collapsed"/>
    </Grid>

    <!-- Messages side panel (styled card) -->
    <Border Grid.Row="1" Grid.Column="1" Background="#0f1a30" BorderBrush="#15223b" BorderThickness="2" Padding="10" CornerRadius="12" FlowDirection="RightToLeft">
      <Border.Effect>
        <DropShadowEffect Color="#000000" BlurRadius="12" ShadowDepth="0" Opacity="0.4"/>
      </Border.Effect>
      <Grid Height="360">
        <Grid.RowDefinitions>
          <RowDefinition Height="Auto"/>
          <RowDefinition Height="*"/>
        </Grid.RowDefinitions>
        <TextBlock Text="הודעות ועדכונים" Foreground="#ffd700" FontWeight="Bold" Margin="12" Grid.Row="0" HorizontalAlignment="Center" FontSize="24" TextAlignment="Center"/>
        <Border Grid.Row="1" Background="#0b1c33" CornerRadius="10" Padding="8" Margin="8" BorderBrush="#203b66" BorderThickness="1" ClipToBounds="True">
          <Canvas x:Name="MessagesCanvas">
            <StackPanel x:Name="MessagesStack1" FlowDirection="RightToLeft" HorizontalAlignment="Stretch"/>
            <StackPanel x:Name="MessagesStack2" FlowDirection="RightToLeft" HorizontalAlignment="Stretch"/>
          </Canvas>
        </Border>
      </Grid>
    </Border>

    <!-- Bottom ticker -->
    <Border Grid.Row="2" Grid.ColumnSpan="2" Background="#111" BorderBrush="#ffd700" BorderThickness="1">
      <Grid FlowDirection="RightToLeft">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="Auto"/>
          <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <TextBlock Text="חדשות:" Foreground="#ffd700" FontWeight="Bold" VerticalAlignment="Center" Margin="12,0" Grid.Column="0"/>
        <Canvas x:Name="TickerCanvas" ClipToBounds="True" Grid.Column="1">
          <TextBlock x:Name="TickerText" Foreground="#ffd700" FontSize="22" Canvas.Left="10" Canvas.Top="14" FlowDirection="RightToLeft" TextAlignment="Right"/>
        </Canvas>
      </Grid>
    </Border>
  </Grid>
</Window>

